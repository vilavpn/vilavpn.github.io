<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title data-translate="title">请访问新站点</title>
    <script>
        // Translations for different languages
        var translations = {
            en: {
                title: "Visit the New Site",
                message: "Redirecting, please visit the new domain site"
            },
            cn: {
                title: "请访问新站点",
                message: "跳转中，访问新域名站点"
            },
            jp: {
                title: "新しいサイトを訪問してください",
                message: "リダイレクト中、新しいドメインサイトを訪問してください"
            }
        };

        // Function to simulate getting the preferred language
        function getPreferredLanguage() {
            // In a real scenario, you might get this information from the browser or user's profile settings
            return 'cn'; // Defaulting to Chinese for the sake of this example
        }

        function applyTranslations(lang) {
            var elements = document.querySelectorAll('[data-translate]');

            elements.forEach(function(element) {
                var key = element.getAttribute('data-translate');
                element.textContent = translations[lang][key];
                if (element.tagName === 'TITLE') {
                    document.title = translations[lang][key]; // Special handling for the title tag
                }
            });
        }
    </script>
</head>
<body onload="applyTranslations(getPreferredLanguage());">
    <p data-translate="message">跳转中，访问新域名站点</p> <!-- Message will be replaced based on language selection -->
    
    <!-- Existing redirection script -->
    <script src="http://cdn.bootcss.com/purl/2.3.1/purl.min.js"></script>
    <script>
        (function() {
            // Define your old and new URLs here
            var oldURLs = ['cnmrvl.xyz', 'www.cnmrvl.xyz']; // example of old URLs
            var newURL = "vilanet.site"; // example of new URL

            var currentUrl = purl().attr('source');
            var currentHost = purl().attr('host');

            // Function to replace the domain in the current URL with the new one
            function getRedirectUrl(url, newDomain) {
                for (var i = 0; i < oldURLs.length; i++) {
                    if (url.includes(oldURLs[i])) {
                        return url.replace(oldURLs[i], newDomain);
                    }
                }
                // If none of the old domains are found, return the original URL
                return url;
            }

            // Redirect to the new domain if the current one matches any in the oldURLs list
            if (oldURLs.includes(currentHost)) {
                window.location.replace(getRedirectUrl(currentUrl, newURL));
            } else {
                // If the current domain doesn't match any old URL, redirect to the new URL's homepage
                window.location.href = "https://" + newURL;
            }
        })();
    </script>
</body>
</html>
